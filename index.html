<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Open Directory Finder - Direct Download Search</title>
	<meta name="keywords" content="download,movies,games,music,softwares,epub,ebooks,pdf,mp3,songs,direct download">
	<meta name="description"
		content="Find direct download links for almost anything. TV Series, Movies, Books, music, softwares, games. Take advantage of powerful advanced search.">

	<!-- Font Awesome for icons -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<!-- Google Font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

	<style>
		/* CSS Reset & Variables */
		*,
		*::before,
		*::after {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}

		:root {
			--bg-primary: #0a0a0f;
			--bg-secondary: #12121a;
			--bg-card: rgba(255, 255, 255, 0.03);
			--bg-card-hover: rgba(255, 255, 255, 0.06);
			--text-primary: #ffffff;
			--text-secondary: rgba(255, 255, 255, 0.7);
			--text-muted: rgba(255, 255, 255, 0.4);
			--border-color: rgba(255, 255, 255, 0.1);
			--accent-gradient: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%);
			--accent-primary: #7c3aed;
			--accent-secondary: #3b82f6;
			--glass-bg: rgba(255, 255, 255, 0.05);
			--glass-border: rgba(255, 255, 255, 0.1);
			--shadow-glow: 0 0 40px rgba(124, 58, 237, 0.15);
			--success-color: #10b981;
			--transition-fast: 0.15s ease;
			--transition-normal: 0.3s ease;
		}

		[data-theme="light"] {
			--bg-primary: #f5f5f7;
			--bg-secondary: #ffffff;
			--bg-card: rgba(0, 0, 0, 0.02);
			--bg-card-hover: rgba(0, 0, 0, 0.05);
			--text-primary: #1a1a2e;
			--text-secondary: rgba(0, 0, 0, 0.7);
			--text-muted: rgba(0, 0, 0, 0.4);
			--border-color: rgba(0, 0, 0, 0.1);
			--glass-bg: rgba(255, 255, 255, 0.7);
			--glass-border: rgba(0, 0, 0, 0.1);
			--shadow-glow: 0 0 40px rgba(124, 58, 237, 0.1);
		}

		html {
			font-size: 16px;
			scroll-behavior: smooth;
		}

		body {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
			background: var(--bg-primary);
			color: var(--text-primary);
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 1rem;
			transition: background-color var(--transition-normal), color var(--transition-normal);
		}

		body::before,
		body::after {
			content: '';
			position: fixed;
			width: 600px;
			height: 600px;
			border-radius: 50%;
			filter: blur(120px);
			opacity: 0.3;
			pointer-events: none;
			z-index: -1;
		}

		body::before {
			background: var(--accent-primary);
			top: -200px;
			right: -200px;
		}

		body::after {
			background: var(--accent-secondary);
			bottom: -200px;
			left: -200px;
		}

		.theme-toggle {
			position: fixed;
			top: 1.5rem;
			right: 1.5rem;
			width: 48px;
			height: 48px;
			border-radius: 50%;
			background: var(--glass-bg);
			backdrop-filter: blur(10px);
			border: 1px solid var(--glass-border);
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.25rem;
			color: var(--text-primary);
			transition: all var(--transition-fast);
			z-index: 1000;
		}

		.theme-toggle:hover {
			background: var(--bg-card-hover);
			transform: scale(1.05);
		}

		.theme-toggle .fa-sun {
			display: none;
		}

		.theme-toggle .fa-moon {
			display: block;
		}

		[data-theme="light"] .theme-toggle .fa-sun {
			display: block;
		}

		[data-theme="light"] .theme-toggle .fa-moon {
			display: none;
		}

		.container {
			width: 100%;
			max-width: 750px;
			animation: fadeInUp 0.6s ease-out;
		}

		@keyframes fadeInUp {
			from {
				opacity: 0;
				transform: translateY(30px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		.header {
			text-align: center;
			margin-bottom: 2rem;
		}

		.logo {
			font-size: 2.5rem;
			font-weight: 700;
			background: var(--accent-gradient);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			margin-bottom: 0.5rem;
		}

		.tagline {
			color: var(--text-secondary);
			font-size: 1rem;
		}

		.search-card {
			background: var(--glass-bg);
			backdrop-filter: blur(20px);
			border: 1px solid var(--glass-border);
			border-radius: 24px;
			padding: 1.75rem;
			box-shadow: var(--shadow-glow);
		}

		.dropdown-row {
			display: flex;
			gap: 0.75rem;
			margin-bottom: 1rem;
			flex-wrap: wrap;
		}

		.dropdown {
			position: relative;
			flex: 1;
			min-width: 130px;
		}

		.dropdown-btn {
			width: 100%;
			padding: 0.75rem 1rem;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-radius: 12px;
			color: var(--text-primary);
			font-size: 0.85rem;
			font-weight: 500;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 0.5rem;
			transition: all var(--transition-fast);
		}

		.dropdown-btn:hover {
			background: var(--bg-card-hover);
			border-color: var(--accent-primary);
		}

		.dropdown-btn .fa-chevron-down {
			font-size: 0.7rem;
			transition: transform var(--transition-fast);
		}

		.dropdown.active .dropdown-btn .fa-chevron-down {
			transform: rotate(180deg);
		}

		.dropdown-menu {
			position: absolute;
			top: calc(100% + 8px);
			left: 0;
			right: 0;
			background: var(--bg-secondary);
			border: 1px solid var(--border-color);
			border-radius: 12px;
			padding: 0.5rem;
			opacity: 0;
			visibility: hidden;
			transform: translateY(-10px);
			transition: all var(--transition-fast);
			z-index: 100;
			box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
			max-height: 300px;
			overflow-y: auto;
		}

		.dropdown.active .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}

		.dropdown-item {
			display: flex;
			align-items: center;
			gap: 0.75rem;
			padding: 0.65rem 1rem;
			border-radius: 8px;
			color: var(--text-secondary);
			font-size: 0.85rem;
			cursor: pointer;
			transition: all var(--transition-fast);
		}

		.dropdown-item:hover {
			background: var(--bg-card-hover);
			color: var(--text-primary);
		}

		.dropdown-item i {
			width: 18px;
			text-align: center;
			opacity: 0.7;
		}

		.search-group {
			display: flex;
			gap: 0;
		}

		.search-input {
			flex: 1;
			padding: 0.875rem 1rem;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-right: none;
			border-radius: 12px 0 0 12px;
			color: var(--text-primary);
			font-size: 0.95rem;
			font-family: inherit;
			transition: all var(--transition-fast);
		}

		.search-input::placeholder {
			color: var(--text-muted);
		}

		.search-input:focus {
			outline: none;
			border-color: var(--accent-primary);
			background: var(--bg-card-hover);
		}

		.search-btn {
			padding: 0.875rem 1.5rem;
			background: var(--accent-gradient);
			border: none;
			border-radius: 0 12px 12px 0;
			color: #ffffff;
			font-size: 0.95rem;
			font-weight: 600;
			cursor: pointer;
			display: flex;
			align-items: center;
			gap: 0.5rem;
			min-width: 110px;
			justify-content: center;
			transition: all var(--transition-fast);
			position: relative;
		}

		.search-btn:hover {
			transform: scale(1.02);
			box-shadow: 0 0 30px rgba(124, 58, 237, 0.4);
		}

		.search-btn.loading {
			pointer-events: none;
		}

		.search-btn.loading .btn-text {
			opacity: 0;
		}

		.search-btn .spinner {
			position: absolute;
			display: none;
		}

		.search-btn.loading .spinner {
			display: block;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			from {
				transform: rotate(0deg);
			}

			to {
				transform: rotate(360deg);
			}
		}

		/* Advanced Options */
		.advanced-toggle {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			margin-top: 1rem;
			color: var(--text-muted);
			font-size: 0.85rem;
			cursor: pointer;
			transition: color var(--transition-fast);
		}

		.advanced-toggle:hover {
			color: var(--text-secondary);
		}

		.advanced-toggle i {
			transition: transform var(--transition-fast);
		}

		.advanced-toggle.active i {
			transform: rotate(180deg);
		}

		.advanced-options {
			max-height: 0;
			overflow: hidden;
			transition: max-height 0.3s ease;
		}

		.advanced-options.active {
			max-height: 400px;
		}

		.advanced-content {
			padding-top: 1rem;
			display: flex;
			flex-direction: column;
			gap: 0.75rem;
		}

		.option-row {
			display: flex;
			align-items: center;
			gap: 0.75rem;
		}

		.option-label {
			color: var(--text-secondary);
			font-size: 0.85rem;
			flex: 1;
		}

		/* Toggle Switch */
		.toggle-switch {
			position: relative;
			width: 44px;
			height: 24px;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-radius: 12px;
			cursor: pointer;
			transition: all var(--transition-fast);
		}

		.toggle-switch::after {
			content: '';
			position: absolute;
			top: 2px;
			left: 2px;
			width: 18px;
			height: 18px;
			background: var(--text-muted);
			border-radius: 50%;
			transition: all var(--transition-fast);
		}

		.toggle-switch.active {
			background: var(--accent-primary);
			border-color: var(--accent-primary);
		}

		.toggle-switch.active::after {
			left: 22px;
			background: #fff;
		}

		.small-input {
			flex: 1;
			padding: 0.5rem 0.75rem;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-radius: 8px;
			color: var(--text-primary);
			font-size: 0.85rem;
			font-family: inherit;
		}

		.small-input:focus {
			outline: none;
			border-color: var(--accent-primary);
		}

		.small-input::placeholder {
			color: var(--text-muted);
		}

		/* Search History */
		.history-section {
			margin-top: 1rem;
			border-top: 1px solid var(--border-color);
			padding-top: 1rem;
		}

		.history-header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 0.5rem;
		}

		.history-title {
			color: var(--text-muted);
			font-size: 0.8rem;
			font-weight: 500;
		}

		.history-clear {
			color: var(--text-muted);
			font-size: 0.75rem;
			cursor: pointer;
			transition: color var(--transition-fast);
		}

		.history-clear:hover {
			color: var(--accent-primary);
		}

		.history-list {
			display: flex;
			flex-wrap: wrap;
			gap: 0.5rem;
		}

		.history-item {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			padding: 0.4rem 0.75rem;
			background: var(--bg-card);
			border: 1px solid var(--border-color);
			border-radius: 20px;
			font-size: 0.8rem;
			color: var(--text-secondary);
			cursor: pointer;
			transition: all var(--transition-fast);
		}

		.history-item:hover {
			background: var(--bg-card-hover);
			color: var(--text-primary);
		}

		.history-item .delete {
			opacity: 0.5;
			font-size: 0.7rem;
		}

		.history-item .delete:hover {
			opacity: 1;
			color: #ef4444;
		}

		/* Open All Button */
		.open-all-btn {
			margin-top: 1rem;
			padding: 0.75rem 1rem;
			background: transparent;
			border: 1px solid var(--accent-primary);
			border-radius: 12px;
			color: var(--accent-primary);
			font-size: 0.85rem;
			font-weight: 500;
			cursor: pointer;
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 0.5rem;
			transition: all var(--transition-fast);
		}

		.open-all-btn:hover {
			background: var(--accent-primary);
			color: #fff;
		}

		.footer {
			margin-top: 1.5rem;
			text-align: center;
			color: var(--text-muted);
			font-size: 0.75rem;
		}

		@media (max-width: 600px) {
			.logo {
				font-size: 1.75rem;
			}

			.search-card {
				padding: 1.25rem;
				border-radius: 20px;
			}

			.dropdown-row {
				flex-direction: column;
			}

			.dropdown {
				min-width: 100%;
			}

			.search-group {
				flex-direction: column;
				gap: 0.75rem;
			}

			.search-input {
				border-radius: 12px;
				border-right: 1px solid var(--border-color);
			}

			.search-btn {
				border-radius: 12px;
			}

			.theme-toggle {
				top: 1rem;
				right: 1rem;
				width: 44px;
				height: 44px;
			}
		}

		.dropdown-btn.selected {
			border-color: var(--accent-primary);
			background: rgba(124, 58, 237, 0.1);
		}

		.hidden {
			display: none !important;
		}
	</style>
</head>

<body>
	<button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
		<i class="fas fa-moon"></i>
		<i class="fas fa-sun"></i>
	</button>

	<div class="container">
		<header class="header">
			<h1 class="logo">Open Directory Finder</h1>
			<p class="tagline">Find direct download links for almost anything</p>
		</header>

		<div class="search-card">
			<form id="searchForm" onsubmit="event.preventDefault(); startSearch();">
				<input type="hidden" id="fileType" value="">
				<input type="hidden" id="resType" value="all">
				<input type="hidden" id="engine" value="google">

				<div class="dropdown-row">
					<!-- File Type Dropdown -->
					<div class="dropdown" id="fileTypeDropdown">
						<button type="button" class="dropdown-btn" onclick="toggleDropdown('fileTypeDropdown')">
							<span><i class="fas fa-folder"></i> <span id="fileTypeLabel">File Type</span></span>
							<i class="fas fa-chevron-down"></i>
						</button>
						<div class="dropdown-menu">
							<div class="dropdown-item"
								onclick="setFiletype('mkv|mp4|avi|mov|mpg|wmv|divx|mpeg', 'Movies/TV', 'video', 'fa-film')">
								<i class="fas fa-film"></i> Movies / TV
							</div>
							<div class="dropdown-item"
								onclick="setFiletype('MOBI|CBZ|CBR|CBC|CHM|EPUB|FB2|LIT|LRF|ODT|PDF|PRC|PDB|PML|RB|RTF|TCR|DOC|DOCX', 'Books', 'ebook', 'fa-book')">
								<i class="fas fa-book"></i> Books
							</div>
							<div class="dropdown-item"
								onclick="setFiletype('mp3|wav|ac3|ogg|flac|wma|m4a|aac|mod', 'Music', 'audio', 'fa-music')">
								<i class="fas fa-music"></i> Music
							</div>
							<div class="dropdown-item"
								onclick="setFiletype('exe|iso|dmg|tar|7z|bz2|gz|rar|zip|apk', 'Software', 'archive', 'fa-compact-disc')">
								<i class="fas fa-compact-disc"></i> Software / Games
							</div>
							<div class="dropdown-item"
								onclick="setFiletype('jpg|png|bmp|gif|tif|tiff|psd', 'Images', 'picture', 'fa-image')">
								<i class="fas fa-image"></i> Images
							</div>
							<div class="dropdown-item" onclick="setFiletype('', 'All Files', 'all', 'fa-asterisk')">
								<i class="fas fa-asterisk"></i> All Files
							</div>
						</div>
					</div>

					<!-- Search Engine Dropdown -->
					<div class="dropdown" id="engineDropdown">
						<button type="button" class="dropdown-btn" onclick="toggleDropdown('engineDropdown')">
							<span><i class="fas fa-search"></i> <span id="engineLabel">Google</span></span>
							<i class="fas fa-chevron-down"></i>
						</button>
						<div class="dropdown-menu">
							<div class="dropdown-item" onclick="setEngine('google', 'Google')"><i
									class="fab fa-google"></i> Google</div>
							<div class="dropdown-item" onclick="setEngine('duckduckgo', 'DuckDuckGo')"><i
									class="fas fa-duck"></i> DuckDuckGo</div>
							<div class="dropdown-item" onclick="setEngine('bing', 'Bing')"><i
									class="fab fa-microsoft"></i> Bing</div>
							<div class="dropdown-item" onclick="setEngine('yandex', 'Yandex')"><i
									class="fab fa-yandex"></i> Yandex</div>
							<div class="dropdown-item" onclick="setEngine('startpage', 'Startpage')"><i
									class="fas fa-shield-alt"></i> Startpage</div>
							<div class="dropdown-item" onclick="setEngine('searx', 'SearX')"><i
									class="fas fa-user-secret"></i> SearX</div>
							<div class="dropdown-item" onclick="setEngine('filepursuit', 'FilePursuit')"><i
									class="fas fa-file-alt"></i> FilePursuit</div>
						</div>
					</div>
				</div>

				<!-- Search Input -->
				<div class="search-group">
					<input type="text" id="query" class="search-input"
						placeholder="Search movies, music, books, software..." autocomplete="off" required>
					<button type="submit" class="search-btn" id="searchBtn">
						<span class="btn-text"><i class="fas fa-search"></i> Search</span>
						<i class="fas fa-spinner spinner"></i>
					</button>
				</div>

				<!-- Advanced Options Toggle -->
				<div class="advanced-toggle" onclick="toggleAdvanced()">
					<i class="fas fa-chevron-down"></i>
					<span>Advanced Options</span>
				</div>

				<div class="advanced-options" id="advancedOptions">
					<div class="advanced-content">
						<div class="option-row">
							<span class="option-label">Include <code>intitle:index.of</code></span>
							<div class="toggle-switch active" id="toggleIndexOf" onclick="toggleSwitch(this)"></div>
						</div>
						<div class="option-row">
							<span class="option-label">Exclude common non-download pages</span>
							<div class="toggle-switch active" id="toggleExclude" onclick="toggleSwitch(this)"></div>
						</div>
						<div class="option-row">
							<span class="option-label">Limit to domain:</span>
							<input type="text" id="siteFilter" class="small-input" placeholder="e.g. example.com"
								style="max-width: 180px;">
						</div>
						<div class="option-row">
							<span class="option-label">Custom extensions:</span>
							<input type="text" id="customExtensions" class="small-input" placeholder="e.g. srt,sub,ass"
								style="max-width: 180px;">
						</div>
					</div>
				</div>

				<!-- Open All Engines Button -->
				<button type="button" class="open-all-btn" onclick="openAllEngines()">
					<i class="fas fa-external-link-alt"></i> Open in All Engines
				</button>
			</form>

			<!-- Search History -->
			<div class="history-section" id="historySection">
				<div class="history-header">
					<span class="history-title">Recent Searches</span>
					<span class="history-clear" onclick="clearHistory()">Clear All</span>
				</div>
				<div class="history-list" id="historyList"></div>
			</div>
		</div>

		<footer class="footer">
			<p>Uses advanced search operators to find open directory listings</p>
		</footer>
	</div>

	<script>
		// Theme
		function initTheme() {
			const savedTheme = localStorage.getItem('theme') || 'dark';
			document.documentElement.setAttribute('data-theme', savedTheme);
		}
		function toggleTheme() {
			const current = document.documentElement.getAttribute('data-theme');
			const next = current === 'dark' ? 'light' : 'dark';
			document.documentElement.setAttribute('data-theme', next);
			localStorage.setItem('theme', next);
		}

		// Dropdowns
		function toggleDropdown(id) {
			const dropdown = document.getElementById(id);
			const isActive = dropdown.classList.contains('active');
			document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
			if (!isActive) dropdown.classList.add('active');
		}
		document.addEventListener('click', (e) => {
			if (!e.target.closest('.dropdown')) {
				document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('active'));
			}
		});

		function setFiletype(fileType, label, resType, icon) {
			document.getElementById('fileType').value = fileType;
			document.getElementById('resType').value = resType;
			const btn = document.querySelector('#fileTypeDropdown .dropdown-btn');
			btn.classList.add('selected');
			btn.querySelector('span').innerHTML = `<i class="fas ${icon}"></i> ${label}`;
			document.getElementById('fileTypeDropdown').classList.remove('active');
			document.getElementById('query').focus();
		}

		function setEngine(engine, label) {
			document.getElementById('engine').value = engine;
			document.getElementById('engineLabel').textContent = label;
			document.getElementById('engineDropdown').classList.remove('active');
			document.getElementById('query').focus();
		}

		// Advanced Options
		function toggleAdvanced() {
			const toggle = document.querySelector('.advanced-toggle');
			const options = document.getElementById('advancedOptions');
			toggle.classList.toggle('active');
			options.classList.toggle('active');
		}

		function toggleSwitch(el) {
			el.classList.toggle('active');
		}

		// Build search URL
		function buildSearchUrl(engine, query) {
			let fileType = document.getElementById('fileType').value;
			const resType = document.getElementById('resType').value;
			const siteFilter = document.getElementById('siteFilter').value.trim();
			const customExt = document.getElementById('customExtensions').value.trim();
			const includeIndexOf = document.getElementById('toggleIndexOf').classList.contains('active');
			const excludePages = document.getElementById('toggleExclude').classList.contains('active');

			// Add custom extensions
			if (customExt) {
				const extList = customExt.split(',').map(e => e.trim().replace(/^\./, '')).join('|');
				fileType = fileType ? fileType + '|' + extList : extList;
			}

			let finalQuery = query;

			// File type filter
			if (fileType) {
				finalQuery += ` +(${fileType})`;
			}

			// Index of
			if (includeIndexOf) {
				finalQuery += ' intitle:index.of';
			}

			// Exclude pages
			if (excludePages) {
				finalQuery += ' -inurl:(jsp|pl|php|html|aspx|htm|cf|shtml) -inurl:(listen77|mp3raid|mp3toss|mp3drug|index_of|index-of|wallywashis|downloadmana)';
			}

			// Site filter
			if (siteFilter) {
				finalQuery += ` site:${siteFilter}`;
			}

			// Build URL per engine
			switch (engine) {
				case 'google':
					return 'https://www.google.com/search?q=' + encodeURIComponent(finalQuery);
				case 'duckduckgo':
					return 'https://duckduckgo.com/?q=' + encodeURIComponent(finalQuery);
				case 'bing':
					return 'https://www.bing.com/search?q=' + encodeURIComponent(finalQuery);
				case 'yandex':
					return 'https://yandex.com/search/?text=' + encodeURIComponent(finalQuery);
				case 'startpage':
					return 'https://www.startpage.com/do/dsearch?query=' + encodeURIComponent(finalQuery);
				case 'searx':
					return 'https://searx.be/?q=' + encodeURIComponent(finalQuery);
				case 'filepursuit':
					return 'https://filepursuit.com/search/' + query.replace(/ /g, '+') + '/type/' + resType;
				default:
					return 'https://www.google.com/search?q=' + encodeURIComponent(finalQuery);
			}
		}

		// Start Search
		function startSearch() {
			const query = document.getElementById('query').value.trim();
			if (!query) return;

			const engine = document.getElementById('engine').value;
			const btn = document.getElementById('searchBtn');
			btn.classList.add('loading');

			// Save to history
			saveToHistory(query);

			const url = buildSearchUrl(engine, query);
			setTimeout(() => {
				window.open(url, '_blank');
				btn.classList.remove('loading');
			}, 300);
		}

		// Open All Engines
		function openAllEngines() {
			const query = document.getElementById('query').value.trim();
			if (!query) { alert('Please enter a search query'); return; }

			saveToHistory(query);

			const engines = ['google', 'duckduckgo', 'bing', 'startpage'];
			engines.forEach((eng, i) => {
				setTimeout(() => {
					window.open(buildSearchUrl(eng, query), '_blank');
				}, i * 200);
			});
		}

		// Search History
		function getHistory() {
			return JSON.parse(localStorage.getItem('searchHistory') || '[]');
		}

		function saveToHistory(query) {
			let history = getHistory();
			history = history.filter(h => h !== query);
			history.unshift(query);
			history = history.slice(0, 10);
			localStorage.setItem('searchHistory', JSON.stringify(history));
			renderHistory();
		}

		function removeFromHistory(query) {
			let history = getHistory().filter(h => h !== query);
			localStorage.setItem('searchHistory', JSON.stringify(history));
			renderHistory();
		}

		function clearHistory() {
			localStorage.removeItem('searchHistory');
			renderHistory();
		}

		function renderHistory() {
			const history = getHistory();
			const section = document.getElementById('historySection');
			const list = document.getElementById('historyList');

			if (history.length === 0) {
				section.classList.add('hidden');
				return;
			}

			section.classList.remove('hidden');
			list.innerHTML = history.map(q => `
                <div class="history-item" onclick="useHistory('${q.replace(/'/g, "\\'")}')">
                    <span>${q.length > 25 ? q.substring(0, 25) + '...' : q}</span>
                    <i class="fas fa-times delete" onclick="event.stopPropagation(); removeFromHistory('${q.replace(/'/g, "\\'")}')"></i>
                </div>
            `).join('');
		}

		function useHistory(query) {
			document.getElementById('query').value = query;
			document.getElementById('query').focus();
		}

		// Init
		initTheme();
		renderHistory();
	</script>
</body>

</html>